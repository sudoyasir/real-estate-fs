{"version":3,"file":"use-dates-input.mjs","sources":["../../../src/hooks/use-dates-input/use-dates-input.ts"],"sourcesContent":["import { useDisclosure } from '@mantine/hooks';\nimport { DatePickerType, DatePickerValue } from '../../types';\nimport { useDatesContext } from '../../components/DatesProvider';\nimport { useUncontrolledDates } from '../use-uncontrolled-dates/use-uncontrolled-dates';\nimport { getFormattedDate } from '../../utils';\n\ninterface UseDatesInput<Type extends DatePickerType = 'default'> {\n  type: Type;\n  value: DatePickerValue<Type> | undefined;\n  defaultValue: DatePickerValue<Type> | undefined;\n  onChange: ((value: DatePickerValue<Type>) => void) | undefined;\n  locale: string | undefined;\n  format: string | undefined;\n  closeOnChange: boolean | undefined;\n  sortDates: boolean | undefined;\n  labelSeparator: string | undefined;\n}\n\nexport function useDatesInput<Type extends DatePickerType = 'default'>({\n  type,\n  value,\n  defaultValue,\n  onChange,\n  locale,\n  format,\n  closeOnChange,\n  sortDates,\n  labelSeparator,\n}: UseDatesInput<Type>) {\n  const ctx = useDatesContext();\n\n  const [dropdownOpened, dropdownHandlers] = useDisclosure(false);\n\n  const [_value, _setValue] = useUncontrolledDates({\n    type,\n    value,\n    defaultValue,\n    onChange,\n  });\n\n  const formattedValue = getFormattedDate({\n    type,\n    date: _value,\n    locale: ctx.getLocale(locale),\n    format: format!,\n    labelSeparator: ctx.getLabelSeparator(labelSeparator),\n  });\n\n  const setValue = (val: any) => {\n    if (closeOnChange) {\n      if (type === 'default') {\n        dropdownHandlers.close();\n      }\n\n      if (type === 'range' && val[0] && val[1]) {\n        dropdownHandlers.close();\n      }\n    }\n\n    if (sortDates && type === 'multiple') {\n      _setValue([...val].sort((a, b) => a.getTime() - b.getTime()));\n    } else {\n      _setValue(val);\n    }\n  };\n\n  const onClear = () => setValue(type === 'range' ? [null, null] : type === 'multiple' ? [] : null);\n  const shouldClear =\n    type === 'range' ? !!_value[0] : type === 'multiple' ? _value.length > 0 : _value !== null;\n\n  return {\n    _value,\n    setValue,\n    onClear,\n    shouldClear,\n    formattedValue,\n    dropdownOpened,\n    dropdownHandlers,\n  };\n}\n"],"names":[],"mappings":";;;;;;AAIO,SAAS,aAAa,CAAC;AAC9B,EAAE,IAAI;AACN,EAAE,KAAK;AACP,EAAE,YAAY;AACd,EAAE,QAAQ;AACV,EAAE,MAAM;AACR,EAAE,MAAM;AACR,EAAE,aAAa;AACf,EAAE,SAAS;AACX,EAAE,cAAc;AAChB,CAAC,EAAE;AACH,EAAE,MAAM,GAAG,GAAG,eAAe,EAAE,CAAC;AAChC,EAAE,MAAM,CAAC,cAAc,EAAE,gBAAgB,CAAC,GAAG,aAAa,CAAC,KAAK,CAAC,CAAC;AAClE,EAAE,MAAM,CAAC,MAAM,EAAE,SAAS,CAAC,GAAG,oBAAoB,CAAC;AACnD,IAAI,IAAI;AACR,IAAI,KAAK;AACT,IAAI,YAAY;AAChB,IAAI,QAAQ;AACZ,GAAG,CAAC,CAAC;AACL,EAAE,MAAM,cAAc,GAAG,gBAAgB,CAAC;AAC1C,IAAI,IAAI;AACR,IAAI,IAAI,EAAE,MAAM;AAChB,IAAI,MAAM,EAAE,GAAG,CAAC,SAAS,CAAC,MAAM,CAAC;AACjC,IAAI,MAAM;AACV,IAAI,cAAc,EAAE,GAAG,CAAC,iBAAiB,CAAC,cAAc,CAAC;AACzD,GAAG,CAAC,CAAC;AACL,EAAE,MAAM,QAAQ,GAAG,CAAC,GAAG,KAAK;AAC5B,IAAI,IAAI,aAAa,EAAE;AACvB,MAAM,IAAI,IAAI,KAAK,SAAS,EAAE;AAC9B,QAAQ,gBAAgB,CAAC,KAAK,EAAE,CAAC;AACjC,OAAO;AACP,MAAM,IAAI,IAAI,KAAK,OAAO,IAAI,GAAG,CAAC,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC,EAAE;AAChD,QAAQ,gBAAgB,CAAC,KAAK,EAAE,CAAC;AACjC,OAAO;AACP,KAAK;AACL,IAAI,IAAI,SAAS,IAAI,IAAI,KAAK,UAAU,EAAE;AAC1C,MAAM,SAAS,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;AACpE,KAAK,MAAM;AACX,MAAM,SAAS,CAAC,GAAG,CAAC,CAAC;AACrB,KAAK;AACL,GAAG,CAAC;AACJ,EAAE,MAAM,OAAO,GAAG,MAAM,QAAQ,CAAC,IAAI,KAAK,OAAO,GAAG,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG,IAAI,KAAK,UAAU,GAAG,EAAE,GAAG,IAAI,CAAC,CAAC;AACpG,EAAE,MAAM,WAAW,GAAG,IAAI,KAAK,OAAO,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,IAAI,KAAK,UAAU,GAAG,MAAM,CAAC,MAAM,GAAG,CAAC,GAAG,MAAM,KAAK,IAAI,CAAC;AACjH,EAAE,OAAO;AACT,IAAI,MAAM;AACV,IAAI,QAAQ;AACZ,IAAI,OAAO;AACX,IAAI,WAAW;AACf,IAAI,cAAc;AAClB,IAAI,cAAc;AAClB,IAAI,gBAAgB;AACpB,GAAG,CAAC;AACJ;;"}