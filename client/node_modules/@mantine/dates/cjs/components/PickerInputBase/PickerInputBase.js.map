{"version":3,"file":"PickerInputBase.js","sources":["../../../src/components/PickerInputBase/PickerInputBase.tsx"],"sourcesContent":["import React from 'react';\nimport cx from 'clsx';\nimport {\n  BoxProps,\n  StylesApiProps,\n  factory,\n  ElementProps,\n  Factory,\n  __BaseInputProps,\n  PopoverProps,\n  ModalProps,\n  useInputProps,\n  Modal,\n  Input,\n  Popover,\n  CloseButton,\n  InputVariant,\n  __InputStylesNames,\n  MantineSize,\n} from '@mantine/core';\nimport { useDisclosure } from '@mantine/hooks';\nimport { HiddenDatesInput, HiddenDatesInputValue } from '../HiddenDatesInput';\nimport { DatePickerType } from '../../types';\nimport classes from './PickerInputBase.module.css';\n\nexport type PickerInputBaseStylesNames = __InputStylesNames;\n\nexport interface DateInputSharedProps\n  extends Omit<__BaseInputProps, 'size'>,\n    ElementProps<'button', 'defaultValue' | 'value' | 'onChange' | 'type'> {\n  /** Determines whether dropdown should be closed when date is selected, not applicable when type=\"multiple\", true by default */\n  closeOnChange?: boolean;\n\n  /** Type of dropdown, defaults to popover */\n  dropdownType?: 'popover' | 'modal';\n\n  /** Props passed down to Popover component */\n  popoverProps?: Partial<Omit<PopoverProps, 'children'>>;\n\n  /** Props passed down to Modal component */\n  modalProps?: Partial<Omit<ModalProps, 'children'>>;\n\n  /** Determines whether input value can be cleared, adds clear button to right section, false by default */\n  clearable?: boolean;\n\n  /** Props passed down to clear button */\n  clearButtonProps?: React.ComponentPropsWithoutRef<'button'>;\n\n  /** Determines whether the user can modify the value */\n  readOnly?: boolean;\n\n  /** Determines whether dates value should be sorted before onChange call, only applicable when type=\"multiple\", true by default */\n  sortDates?: boolean;\n\n  /** Separator between range value */\n  labelSeparator?: string;\n}\n\nexport interface PickerInputBaseProps\n  extends BoxProps,\n    DateInputSharedProps,\n    Omit<StylesApiProps<PickerInputBaseFactory>, 'classNames' | 'styles'> {\n  classNames?: Partial<Record<string, string>>;\n  styles?: Partial<Record<string, React.CSSProperties>>;\n  __staticSelector?: string;\n  children: React.ReactNode;\n  formattedValue: string | null | undefined;\n  dropdownHandlers: ReturnType<typeof useDisclosure>[1];\n  dropdownOpened: boolean;\n  onClear(): void;\n  shouldClear: boolean;\n  value: HiddenDatesInputValue;\n  type: DatePickerType;\n  size?: MantineSize;\n}\n\nexport type PickerInputBaseFactory = Factory<{\n  props: PickerInputBaseProps;\n  ref: HTMLButtonElement;\n  stylesNames: PickerInputBaseStylesNames;\n  variant: InputVariant;\n}>;\n\nconst defaultProps: Partial<PickerInputBaseProps> = {};\n\nexport const PickerInputBase = factory<PickerInputBaseFactory>((_props, ref) => {\n  const {\n    inputProps,\n    wrapperProps,\n    placeholder,\n    classNames,\n    styles,\n    unstyled,\n    popoverProps,\n    modalProps,\n    dropdownType,\n    children,\n    formattedValue,\n    dropdownHandlers,\n    dropdownOpened,\n    onClick,\n    clearable,\n    onClear,\n    clearButtonProps,\n    rightSection,\n    shouldClear,\n    readOnly,\n    disabled,\n    value,\n    name,\n    form,\n    type,\n    ...others\n  } = useInputProps('PickerInputBase', defaultProps, _props);\n\n  const _rightSection =\n    rightSection ||\n    (clearable && shouldClear && !readOnly && !disabled ? (\n      <CloseButton\n        variant=\"transparent\"\n        onClick={onClear}\n        unstyled={unstyled}\n        size={inputProps.size || 'sm'}\n        {...clearButtonProps}\n      />\n    ) : null);\n\n  const handleClose = () => {\n    const isInvalidRangeValue = type === 'range' && Array.isArray(value) && value[0] && !value[1];\n    if (isInvalidRangeValue) {\n      onClear();\n    }\n\n    dropdownHandlers.close();\n  };\n\n  return (\n    <>\n      {dropdownType === 'modal' && !readOnly && (\n        <Modal\n          opened={dropdownOpened}\n          onClose={handleClose}\n          withCloseButton={false}\n          size=\"auto\"\n          data-dates-modal\n          unstyled={unstyled}\n          {...modalProps}\n        >\n          {children}\n        </Modal>\n      )}\n\n      <Input.Wrapper {...wrapperProps}>\n        <Popover\n          position=\"bottom-start\"\n          opened={dropdownOpened}\n          onClose={handleClose}\n          disabled={dropdownType === 'modal' || readOnly}\n          trapFocus\n          returnFocus\n          unstyled={unstyled}\n          {...popoverProps}\n        >\n          <Popover.Target>\n            <Input\n              aria-label={formattedValue || placeholder}\n              data-dates-input\n              data-read-only={readOnly || undefined}\n              disabled={disabled}\n              component=\"button\"\n              type=\"button\"\n              multiline\n              onClick={(event) => {\n                onClick?.(event);\n                dropdownHandlers.toggle();\n              }}\n              rightSection={_rightSection}\n              {...inputProps}\n              ref={ref}\n              classNames={{ ...classNames, input: cx(classes.input, (classNames as any)?.input) }}\n              {...others}\n            >\n              {formattedValue || (\n                <Input.Placeholder error={inputProps.error} unstyled={unstyled}>\n                  {placeholder}\n                </Input.Placeholder>\n              )}\n            </Input>\n          </Popover.Target>\n\n          <Popover.Dropdown data-dates-dropdown>{children}</Popover.Dropdown>\n        </Popover>\n      </Input.Wrapper>\n      <HiddenDatesInput value={value} name={name} form={form} type={type} />\n    </>\n  );\n});\n\nPickerInputBase.classes = classes;\nPickerInputBase.displayName = '@mantine/dates/PickerInputBase';\n"],"names":["factory","useInputProps","React","CloseButton","Modal","Input","Popover","cx","classes","HiddenDatesInput"],"mappings":"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"}