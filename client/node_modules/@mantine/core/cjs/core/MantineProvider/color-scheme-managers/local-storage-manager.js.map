{"version":3,"file":"local-storage-manager.js","sources":["../../../../src/core/MantineProvider/color-scheme-managers/local-storage-manager.ts"],"sourcesContent":["import type { MantineColorSchemeManager } from './types';\nimport { isMantineColorScheme } from './is-mantine-color-scheme';\n\nexport interface LocalStorageColorSchemeManagerOptions {\n  /** Local storage key used to retrieve value with `localStorage.getItem(key)`, `mantine-color-scheme-value` by default */\n  key?: string;\n}\n\nexport function localStorageColorSchemeManager({\n  key = 'mantine-color-scheme-value',\n}: LocalStorageColorSchemeManagerOptions = {}): MantineColorSchemeManager {\n  let handleStorageEvent: (event: StorageEvent) => void;\n\n  return {\n    get: (defaultValue) => {\n      if (typeof window === 'undefined') {\n        return defaultValue;\n      }\n\n      try {\n        const storedColorScheme = window.localStorage.getItem(key);\n        return isMantineColorScheme(storedColorScheme) ? storedColorScheme : defaultValue;\n      } catch {\n        return defaultValue;\n      }\n    },\n\n    set: (value) => {\n      try {\n        window.localStorage.setItem(key, value);\n      } catch (error) {\n        // eslint-disable-next-line no-console\n        console.warn(\n          '[@mantine/core] Local storage color scheme manager was unable to save color scheme.',\n          error\n        );\n      }\n    },\n\n    subscribe: (onUpdate) => {\n      handleStorageEvent = (event) => {\n        if (event.storageArea === window.localStorage && event.key === key) {\n          isMantineColorScheme(event.newValue) && onUpdate(event.newValue);\n        }\n      };\n\n      window.addEventListener('storage', handleStorageEvent);\n    },\n\n    unsubscribe: () => {\n      window.removeEventListener('storage', handleStorageEvent);\n    },\n\n    clear: () => {\n      window.localStorage.removeItem(key);\n    },\n  };\n}\n"],"names":["isMantineColorScheme"],"mappings":";;;;;;;AACO,SAAS,8BAA8B,CAAC;AAC/C,EAAE,GAAG,GAAG,4BAA4B;AACpC,CAAC,GAAG,EAAE,EAAE;AACR,EAAE,IAAI,kBAAkB,CAAC;AACzB,EAAE,OAAO;AACT,IAAI,GAAG,EAAE,CAAC,YAAY,KAAK;AAC3B,MAAM,IAAI,OAAO,MAAM,KAAK,WAAW,EAAE;AACzC,QAAQ,OAAO,YAAY,CAAC;AAC5B,OAAO;AACP,MAAM,IAAI;AACV,QAAQ,MAAM,iBAAiB,GAAG,MAAM,CAAC,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;AACnE,QAAQ,OAAOA,yCAAoB,CAAC,iBAAiB,CAAC,GAAG,iBAAiB,GAAG,YAAY,CAAC;AAC1F,OAAO,CAAC,OAAO,CAAC,EAAE;AAClB,QAAQ,OAAO,YAAY,CAAC;AAC5B,OAAO;AACP,KAAK;AACL,IAAI,GAAG,EAAE,CAAC,KAAK,KAAK;AACpB,MAAM,IAAI;AACV,QAAQ,MAAM,CAAC,YAAY,CAAC,OAAO,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;AAChD,OAAO,CAAC,OAAO,KAAK,EAAE;AACtB,QAAQ,OAAO,CAAC,IAAI;AACpB,UAAU,qFAAqF;AAC/F,UAAU,KAAK;AACf,SAAS,CAAC;AACV,OAAO;AACP,KAAK;AACL,IAAI,SAAS,EAAE,CAAC,QAAQ,KAAK;AAC7B,MAAM,kBAAkB,GAAG,CAAC,KAAK,KAAK;AACtC,QAAQ,IAAI,KAAK,CAAC,WAAW,KAAK,MAAM,CAAC,YAAY,IAAI,KAAK,CAAC,GAAG,KAAK,GAAG,EAAE;AAC5E,UAAUA,yCAAoB,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,QAAQ,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;AAC3E,SAAS;AACT,OAAO,CAAC;AACR,MAAM,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,kBAAkB,CAAC,CAAC;AAC7D,KAAK;AACL,IAAI,WAAW,EAAE,MAAM;AACvB,MAAM,MAAM,CAAC,mBAAmB,CAAC,SAAS,EAAE,kBAAkB,CAAC,CAAC;AAChE,KAAK;AACL,IAAI,KAAK,EAAE,MAAM;AACjB,MAAM,MAAM,CAAC,YAAY,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;AAC1C,KAAK;AACL,GAAG,CAAC;AACJ;;"}